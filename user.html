<!DOCTYPE html>
<html lang="th">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
  <title>เพิ่มไลค์อินสตราแกรม</title>

  <!-- CSS  -->
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <script src="js/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>
  <script src="config.js"></script>
    <script src="js/holder.min.js"></script>
    <script lang="javascript">
        if(!sessionStorage.user){
            location.href="/";
        }
        function txtCard(id,caption,file,like){
        var txt = "<div class='col s12 m6 l4'><div class='card'><div class='card-image'><img src='"+file+"'></div><div class='card-content'<p>"+caption+"</p></div><div class='card-action'><span>Like "+like+" </span><a href='#'>ปั้มไลค์</a></div></div></div>"
        return txt;
        }
        var user;
        var recent;
        var getUser = function(){
            $.getJSON(server.api+server.app+"/"+sessionStorage.user,function(res){
                console.log(res);
                user = res;
            });
        }
        var getRecent = function(){
            $.getJSON(server.api+server.app+"/"+sessionStorage.user+"/recent",function(res){
                console.log(res);
                recent = res;
                var txt = "";
                res.data.forEach(function(r){
                    if(r.id&&r.caption.text,&&r.images.low_resolution.url&&r.likes.count){
                        txt+=txtCard(r.id,r.caption.text,r.images.low_resolution.url,r.likes.count);
                    }
                });
                $("#row-display").html(txt);
            });
        }
        $(function() {
            $.when(getUser(),getRecent()).then(function(){
                $("#middle-loader").hide();     
            });
        });

    </script>
</head>
<body>
  <nav class="light-green darken-2" role="navigation">
      <div class="nav-wrapper">
          <div class="valign-demo valign-wrapper left">
             <a id="logo-container" href="#" class="brand-logo waves-effect waves-light" id="logo">
                 <div class="hide-on-med-and-down">
                     <span class="left" style="padding-left:20px;"><i class="mdi-image-photo-library"></i></span>
                     <span class="left" style="padding-left:15px;font-size: 0.7em;font-weight:300;">Zeed.CF</span>
                 </div>
                 <div class="hide-on-large-only">
				    <span style="font-size: 0.7em;font-weight:300;">Zeed.CF</span>
                 </div>
             </a>
          </div>
        <ul id="nav-mobile" class="right side-nav">
		<li><a href="#">ข้อมูลระบบ</a></li>		
		<li><a href="#">ปริมาณไลค์</a></li>          
		<li><a href="#">เติมเงิน</a></li>
        </ul><a href="#" data-activates="nav-mobile" class="button-collapse"><i class="mdi-navigation-menu"></i></a>
      </div>
  </nav>
  <div class="container">
      <div>
        <div class="row" id="row-display">

        </div>
      </div>
  <div id="middle-loader" class="preloader-wrapper big active" style="position: fixed;top: 50%;left: 50%;margin-top: -30px;margin-left: -30px;">
      <div class="spinner-layer spinner-blue">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>

      <div class="spinner-layer spinner-red">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>

      <div class="spinner-layer spinner-yellow">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>

      <div class="spinner-layer spinner-green">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>
    </div>
   </div>
  </body>
</html>
